@{
    ViewBag.Title = "Server";
}
<style>
    .users {
        margin-top: 40px;
        width:500px;
    }
    .users table{
        text-align:center;
    }
    .usersBar ul .newUser {
        background: green;
    }
</style>
<div class="row">
    <div class="col-lg-12">

    </div>
    <div class="usersBar">
        <ul>
            <li>Contacts</li>
        </ul>
    </div>
</div>
@section scripts{
    <script src="~/Scripts/jquery.signalR-2.4.2.min.js" type="text/javascript"></script>
    <script src="~/signalR/js" type="text/javascript"></script>
    <script src="~/Scripts/ChatApi.js" type="text/javascript"></script>
    <script>
        
        $.connection.hub.start()
            .done(function () {
                chatApi.Users();
            })
            .fail(function () { alert("failed to connect"); });

        $.connection.usersHub.client.newUser = function (data) {
            $(".usersBar ul").append("<li class='newUser'>" + data["Name"] + "</li>");
            setTimeout(function () {
                $(".usersBar ul li").removeAttr("class");
            }, 3000);
        }
        
    </script>
}